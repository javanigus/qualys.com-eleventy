{"version":3,"file":"job-title-auto-complete.js","names":["window","qualys","$","displayJobTitles","job_titles","css","jQuery","ui","append","attr","rel","href","getScript","done","autocomplete","source","request","response","getJobTitles","term","reg","trim","length","RegExp","escapeRegex","grep","value","test","loadJobTitles","language","prefix","indexOf","location","hostname","getJSON","data","each","key","val","push","fail","getLanguage","languages","pathname","match","replace","document","ready"],"sources":["../../../site/pages/asset/script/job-title-auto-complete.js"],"sourcesContent":["/* global jQuery */\n\nwindow.qualys = window.qualys || {};\n\n(function(qualys, $) {\n\t\"use strict\";\n\n\tqualys.displayJobTitles = function(job_titles) {\n\t\tvar css;\n\n\t\t// if jQuery UI is not loaded, load it and then run autocomplete\n\t\tif (jQuery.ui === undefined || jQuery.ui === null) {\n\n\t\t\t// load jquery UI CSS theme\n\t\t\t$(\"head\").append(\"<link />\");\n\t\t\tcss = $(\"head link:last\");\n\t\t\tcss.attr({\n\t\t\t\t\"rel\": \"stylesheet\",\n\t\t\t\t\"href\": \"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css\"\n\t\t\t});\n\t\t\t$.getScript(\"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js\")\n\t\t\t\t.done(function() {\n\t\t\t\t\t$(\"#myform_title, #title, #Title\").autocomplete({\n\t\t\t\t\t\tsource: function( request, response ) {\n\t\t\t\t\t\t\tqualys.getJobTitles(request, response, job_titles);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t// otherwise, it's already loaded so just run autocomplete\n\t\t} else {\n\t\t\t$(\"#myform_title, #title, #Title\").autocomplete({\n\t\t\t\tsource: function( request, response ) {\n\t\t\t\t\tqualys.getJobTitles(request, response, job_titles);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tqualys.getJobTitles = function(request, response, job_titles) {\n\t\tvar term, reg;\n\t\tterm = $.trim(request.term);\n\t\t// show autocomplete only when 3 or more non-space characters are typed\n\t\tif (term !== \"\" && term.length > 2) {\n\t\t\treg = new RegExp($.ui.autocomplete.escapeRegex(term), \"i\");\n\t\t\tresponse($.grep(job_titles, function (value) {\n\t\t\t\treturn reg.test(value);\n\t\t\t}));\n\t\t}\n\t};\n\n\tqualys.loadJobTitles = function(language) {\n\t\tvar prefix = \"\";\n\t\tvar hostnames = [\"lps.qualys.com\", \"www.ssllabs.com\", \"dev.ssllabs.com\"];\n\n\t\tif (hostnames.indexOf(window.location.hostname) !== -1) {\n\t\t\tprefix = \"https://www.qualys.com\";\n\t\t}\n\n\t\t$.getJSON(prefix + \"/asset/text/\" + language + \"/job-titles.json\")\n\t\t\t.done(function(data) {\n\t\t\t\tvar job_titles = [];\n\n\t\t\t\t$.each(data, function(key, val) {\n\t\t\t\t\tjob_titles.push(val);\n\t\t\t\t});\n\n\t\t\t\tqualys.displayJobTitles(job_titles);\n\t\t\t})\n\t\t\t.fail(function() { // if error, just load the English job titles\n\t\t\t\tqualys.loadJobTitles(\"en\");\n\t\t\t});\n\t};\n\n\tqualys.getLanguage = function() {\n\t\tvar language, languages;\n\n\t\t// list of languages must match folders in form processor \"messages\" folder\n\t\tlanguages = [\"de\", \"es\", \"fr\", \"ru\"];\n\n\t\t// get the language and then load the language-specific job titles\n\t\t// use this approach after we bake pages based on language\n\t\t//language = $(\"html\").attr(\"lang\");\n\n\t\t// get language from URL (temporary solution while we still have many forms in PHPHTMLib)\n\t\tlanguage = window.location.pathname.match(/\\/\\w{2}\\/$/);\n\n\t\tif (language === undefined || language === null) {\n\t\t\tlanguage = \"en\";\n\t\t} else {\n\t\t\tlanguage = language[0].replace(/^\\/|\\/$/g,\"\");\n\t\t\t// if language in URL is not in list of existing languages, set to English\n\t\t\tif (languages.indexOf(language) === -1) {\n\t\t\t\tlanguage = \"en\";\n\t\t\t}\n\t\t}\n\t\treturn language;\n\t};\n\n\t$(document).ready(function () {\n\t\tqualys.loadJobTitles(qualys.getLanguage());\n\t});\n}(window.qualys, jQuery));"],"mappings":"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"}