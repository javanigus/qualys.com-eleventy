{"version":3,"file":"infographic-data.js","names":["moment","require","contentful","client","createClient","space","localPath","module","exports","getEntries","content_type","\"fields.type\"","order","then","unWrap","inforesults","items","filter","value","Object","keys","length","info","item","type","topic","includes","process","env","NODE_ENV","entry","publicationDate","isBefore","slice"],"sources":["../../../site/pages/fundamentals/what-is-vulnerability-management-detection-response/infographic-data.js"],"sourcesContent":["const moment = require(\"moment-timezone\");\nconst contentful = require(\"contentful-sync-cli/contentful-local\");\nconst client = contentful.createClient({\n\tspace: \"4l0w8syj29ap\",\n\tlocalPath: \"site/cache/contentful\"\n});\n\nmodule.exports = client.getEntries({\n    \"content_type\": \"resource\",\n    \"fields.type\": \"Infographic\",\n\t\"order\": \"-fields.eventDate, -fields.type, -fields.name\"\n}).then(client.unWrap).then(function (inforesults) {\n\t// remove empty objects from result set\n\tinforesults.items = inforesults.items.filter(value => Object.keys(value).length > 0);\n\t\n\tlet info;\n\n\t// filter to just info\n\tinfo = inforesults.items.filter(item => item.type === \"Infographic\" && item.topic.includes(\"Vulnerability Management\"));\n    \n\n         \n\t// filter out info with future publication dates\n\tif (process.env.NODE_ENV === \"production\") {\n\t\tinfo = info.filter(entry => {\n\t\t\tif (entry.publicationDate) {\n\t\t\t\treturn moment(entry.publicationDate).isBefore();\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\n\t// filter out info without dates\n\t//info = info.filter(entry => entry.eventDate);\n   \n\tinfo = info.slice(0, 1);\n\n\treturn info;\n});"],"mappings":"kBAAM,CAAAA,MAAM,CAAGC,OAAO,CAAC,iBAAiB,CAAC,CACnCC,UAAU,CAAGD,OAAO,CAAC,sCAAsC,CAAC,CAC5DE,MAAM,CAAGD,UAAU,CAACE,YAAY,CAAC,CACtCC,KAAK,CAAE,cAAc,CACrBC,SAAS,CAAE,uBACZ,CAAC,CAAC,CAEFC,MAAM,CAACC,OAAO,CAAGL,MAAM,CAACM,UAAU,CAAC,CAC/BC,YAAA,CAAgB,UAAU,CAC1BC,aAAA,CAAe,aAAa,CAC/BC,KAAA,CAAS,+CACV,CAAC,CAAC,CAACC,IAAI,CAACV,MAAM,CAACW,MAAM,CAAC,CAACD,IAAI,CAAC,SAAUE,CAAW,CAAE,CAElDA,CAAW,CAACC,KAAK,CAAGD,CAAW,CAACC,KAAK,CAACC,MAAM,CAACC,CAAK,EAAgC,CAAC,CAA7BC,MAAM,CAACC,IAAI,CAACF,CAAK,CAAC,CAACG,MAAU,CAAC,CAEpF,GAAI,CAAAC,CAAI,CAER;AAqBA,MApBA,CAAAA,CAAI,CAAGP,CAAW,CAACC,KAAK,CAACC,MAAM,CAACM,CAAI,EAAkB,aAAa,GAA3BA,CAAI,CAACC,IAAsB,EAAID,CAAI,CAACE,KAAK,CAACC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,CAK1F,YAAY,GAArCC,OAAO,CAACC,GAAG,CAACC,QAAyB,GACxCP,CAAI,CAAGA,CAAI,CAACL,MAAM,CAACa,CAAK,GACnBA,CAAK,CAACC,eAAe,EACjB/B,MAAM,CAAC8B,CAAK,CAACC,eAAe,CAAC,CAACC,QAAQ,CAAC,CAI/C,CAAC,EAMHV,CAAI,CAAGA,CAAI,CAACW,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEhBX,CACR,CAAC,CAAC"}