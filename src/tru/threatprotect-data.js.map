{"version":3,"file":"threatprotect-data.js","names":["request","require","numberOfEntries","module","exports","Promise","resolve","reject","url","err","res","body","statusCode","data","JSON","parse","blogPosts","posts","map","post","headline","title","publicationDate","date","link","URL","country","message","concat","d","error","Error"],"sources":["../../site/pages/tru/threatprotect-data.js"],"sourcesContent":["const request = require(\"request\");\n\nconst numberOfEntries = 2;\n\nmodule.exports = new Promise((resolve, reject) => {\n    // get blog posts from Wordpress\n\n    let url =\n        \"https://public-api.wordpress.com/rest/v1.1/sites/threatprotect.qualys.com/posts/?number=\" +\n        numberOfEntries;\n\n    request(url, function (err, res, body) {\n        if (err) {\n            reject(err);\n        } else {\n            if (res && res.statusCode === 200) {\n                let data = JSON.parse(body);\n                let blogPosts = data.posts.map((post) => {\n                    return {\n                        headline: post.title,\n                        publicationDate: post.date,\n                        link: post.URL,\n                        country: [\"us\"],\n                    };\n                });\n                resolve(blogPosts);\n            } else {\n                let message = `${res.statusCode} Not OK: GET ${url}`;\n                try {\n                    let d = JSON.parse(body);\n                    if (d.error && d.message) {\n                        message = `${res.statusCode} ${d.error}: ${d.message} GET ${url}`;\n                    }\n                } catch (err) {\n                    message = `${res.statusCode} Not OK: GET ${url}`;\n                }\n                reject(new Error(message));\n            }\n        }\n    });\n});\n"],"mappings":"kBAAM,CAAAA,OAAO,CAAGC,OAAO,CAAC,SAAS,CAAC,CAE5BC,eAAe,CAAG,CAAC,CAEzBC,MAAM,CAACC,OAAO,CAAG,GAAI,CAAAC,OAAO,CAAC,CAACC,CAAO,CAAEC,CAAM,GAAK,CAC9C;AAEA,GAAI,CAAAC,CAAG,CACH,0FAA0F,CAC1FN,eAAe,CAEnBF,OAAO,CAACQ,CAAG,CAAE,SAAUC,CAAG,CAAEC,CAAG,CAAEC,CAAI,CAAE,CACnC,GAAIF,CAAG,CACHF,CAAM,CAACE,CAAG,CAAC,KAEX,IAAIC,CAAG,EAAuB,GAAG,GAAtBA,CAAG,CAACE,UAAkB,CAAE,IAC3B,CAAAC,CAAI,CAAGC,IAAI,CAACC,KAAK,CAACJ,CAAI,CAAC,CACvBK,CAAS,CAAGH,CAAI,CAACI,KAAK,CAACC,GAAG,CAAEC,CAAI,GACzB,CACHC,QAAQ,CAAED,CAAI,CAACE,KAAK,CACpBC,eAAe,CAAEH,CAAI,CAACI,IAAI,CAC1BC,IAAI,CAAEL,CAAI,CAACM,GAAG,CACdC,OAAO,CAAE,CAAC,IAAI,CAClB,CAAC,CACJ,CAAC,CACFpB,CAAO,CAACU,CAAS,CACrB,CAAC,IAAM,CACH,GAAI,CAAAW,CAAO,IAAAC,MAAA,CAAMlB,CAAG,CAACE,UAAU,kBAAAgB,MAAA,CAAgBpB,CAAG,CAAE,CACpD,GAAI,CACA,GAAI,CAAAqB,CAAC,CAAGf,IAAI,CAACC,KAAK,CAACJ,CAAI,CAAC,CACpBkB,CAAC,CAACC,KAAK,EAAID,CAAC,CAACF,OAAO,GACpBA,CAAO,IAAAC,MAAA,CAAMlB,CAAG,CAACE,UAAU,MAAAgB,MAAA,CAAIC,CAAC,CAACC,KAAK,OAAAF,MAAA,CAAKC,CAAC,CAACF,OAAO,UAAAC,MAAA,CAAQpB,CAAG,CAAE,CAEzE,CAAE,MAAOC,CAAG,CAAE,CACVkB,CAAO,IAAAC,MAAA,CAAMlB,CAAG,CAACE,UAAU,kBAAAgB,MAAA,CAAgBpB,CAAG,CAClD,CACAD,CAAM,CAAC,GAAI,CAAAwB,KAAK,CAACJ,CAAO,CAAC,CAC7B,CAER,CAAC,CACL,CAAC,CAAC"}