{"version":3,"file":"live-events-data.js","names":["moment","require","contentful","client","createClient","space","localPath","module","exports","getEntries","content_type","then","unWrap","response","dynamicSort","property","sortOrder","substr","a","b","result","results","highlightVideoId","items","liveEventItems","filter","value","Object","keys","length","futureEvents","event","eventDate","isAfter","sort"],"sources":["../../site/pages/stream/live-events-data.js"],"sourcesContent":["const moment = require(\"moment-timezone\");\nconst contentful = require(\"contentful-sync-cli/contentful-local\");\nconst client = contentful.createClient({\n    space: \"4l0w8syj29ap\",\n    localPath: \"site/cache/contentful\",\n});\n\nmodule.exports = client\n    .getEntries({\n        content_type: \"onDemandLiveEvents\",\n    })\n    .then(client.unWrap)\n    .then(function (response) {\n        // remove empty objects from result set\n        var results = {};\n        results.highlightVideoId = response.items[0].highlightVideoId;\n        results.items = response.items[0].liveEventItems;\n\n\t\t // function to sort array of objects by property\n\t\t function dynamicSort(property) {\n\t\t\tvar sortOrder = 1;\n\t\t\tif (property[0] === \"-\") {\n\t\t\t\tsortOrder = -1;\n\t\t\t\tproperty = property.substr(1);\n\t\t\t}\n\t\t\treturn function (a, b) {\n\t\t\t\tvar result = a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n\t\t\t\treturn result * sortOrder;\n\t\t\t};\n\t\t}\n        if (results.items) {\n            results.items = results.items.filter(\n                (value) => Object.keys(value).length > 0\n            );\n\n            var futureEvents = results.items.filter((event) => {\n                if (event.eventDate) {\n                    return moment(event.eventDate).isAfter();\n                } else {\n                    return true;\n                }\n            });\n\t\t\t\n\t\t\tif(futureEvents.length > 0) {\n\t\t\t\tfutureEvents.sort(dynamicSort(\"eventDate\"));\n\t\t\t\tresults.items = futureEvents;\n\t\t\t}\n           \n        }\n\n        return results;\n    });\n"],"mappings":"kBAAM,CAAAA,MAAM,CAAGC,OAAO,CAAC,iBAAiB,CAAC,CACnCC,UAAU,CAAGD,OAAO,CAAC,sCAAsC,CAAC,CAC5DE,MAAM,CAAGD,UAAU,CAACE,YAAY,CAAC,CACnCC,KAAK,CAAE,cAAc,CACrBC,SAAS,CAAE,uBACf,CAAC,CAAC,CAEFC,MAAM,CAACC,OAAO,CAAGL,MAAM,CAClBM,UAAU,CAAC,CACRC,YAAY,CAAE,oBAClB,CAAC,CAAC,CACDC,IAAI,CAACR,MAAM,CAACS,MAAM,CAAC,CACnBD,IAAI,CAAC,SAAUE,CAAQ,CAAE,CAM3B;AACA,QAAS,CAAAC,CAAWA,CAACC,CAAQ,CAAE,CAC/B,GAAI,CAAAC,CAAS,CAAG,CAAC,CAKjB,MAJoB,GAAG,GAAnBD,CAAQ,CAAC,CAAC,CAAS,GACtBC,CAAS,CAAG,CAAC,CAAC,CACdD,CAAQ,CAAGA,CAAQ,CAACE,MAAM,CAAC,CAAC,CAAC,EAEvB,SAAUC,CAAC,CAAEC,CAAC,CAAE,CACtB,GAAI,CAAAC,CAAM,CAAGF,CAAC,CAACH,CAAQ,CAAC,CAAGI,CAAC,CAACJ,CAAQ,CAAC,CAAG,CAAC,CAAC,CAAGG,CAAC,CAACH,CAAQ,CAAC,CAAGI,CAAC,CAACJ,CAAQ,CAAC,CAAG,CAAC,CAAG,CAAC,CAC/E,MAAO,CAAAK,CAAM,CAAGJ,CACjB,CACD,CAhBM;AACA,GAAI,CAAAK,CAAO,CAAG,CACNC,gBAAgB,CAAGT,CAAQ,CAACU,KAAK,CAAC,CAAC,CAAC,CAACD,gBAAgB,CACrDC,KAAK,CAAGV,CAAQ,CAACU,KAAK,CAAC,CAAC,CAAC,CAACC,cAFnB,CAAC,CAgBhB,GAAIH,CAAO,CAACE,KAAK,CAAE,CACfF,CAAO,CAACE,KAAK,CAAGF,CAAO,CAACE,KAAK,CAACE,MAAM,CAC/BC,CAAK,EAAiC,CAAC,CAA7BC,MAAM,CAACC,IAAI,CAACF,CAAK,CAAC,CAACG,MAClC,CAAC,CAED,GAAI,CAAAC,CAAY,CAAGT,CAAO,CAACE,KAAK,CAACE,MAAM,CAAEM,CAAK,GACtCA,CAAK,CAACC,SAAS,EACRhC,MAAM,CAAC+B,CAAK,CAACC,SAAS,CAAC,CAACC,OAAO,CAAC,CAI9C,CAAC,CAEc,CAAC,CAAvBH,CAAY,CAACD,MAAU,GACzBC,CAAY,CAACI,IAAI,CAACpB,CAAW,CAAC,WAAW,CAAC,CAAC,CAC3CO,CAAO,CAACE,KAAK,CAAGO,CAAY,CAGxB,CAEA,MAAO,CAAAT,CACX,CAAC,CAAC"}