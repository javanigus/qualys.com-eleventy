{"version":3,"file":"webcasts-data.js","names":["moment","require","contentful","client","createClient","space","localPath","module","exports","getEntries","content_type","\"fields.type\"","order","then","unWrap","results","items","filter","value","Object","keys","length","futureWebcasts","webcasts","item","type","webcast","eventDate","isAfter","sort","property","sortOrder","substr","a","b","result","slice"],"sources":["../../site/pages/stream/webcasts-data.js"],"sourcesContent":["const moment = require(\"moment-timezone\");\nconst contentful = require(\"contentful-sync-cli/contentful-local\");\nconst client = contentful.createClient({\n\tspace: \"4l0w8syj29ap\",\n\tlocalPath: \"site/cache/contentful\"\n});\n\nmodule.exports = client.getEntries({\n\t\"content_type\": \"resource\",\n    \"fields.type\": \"Webcast\",\n\t\"order\": \"-fields.eventDate\"\n}).then(client.unWrap).then(function (results) {\n\t// remove empty objects from result set\n\tresults.items = results.items.filter(value => Object.keys(value).length > 0);\n\n\t// function to sort array of objects by property\n\tfunction dynamicSort(property) {\n\t\tvar sortOrder = 1;\n\t\tif(property[0] === \"-\") {\n\t\t\tsortOrder = -1;\n\t\t\tproperty = property.substr(1);\n\t\t}\n\t\treturn function (a,b) {\n\t\t\tvar result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n\t\t\treturn result * sortOrder;\n\t\t};\n\t}\n\n\tvar futureWebcasts, webcasts;\n\n\twebcasts = results.items.filter(item => item.type === \"Webcast\");\n\n\t// get webcasts in the future\n\tfutureWebcasts = webcasts.filter(webcast => {\n\t\tif (webcast.eventDate) {\n\t\t\treturn moment(webcast.eventDate).isAfter();\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t});\n\n\t// sort array of webcasts by eventDate and publicationDate\n\tfutureWebcasts.sort(dynamicSort(\"eventDate\")); // chronological order\n\tfutureWebcasts = futureWebcasts.slice(0, 5); // limit to 5 webcasts\n\treturn futureWebcasts;\n});\n\n"],"mappings":"kBAAM,CAAAA,MAAM,CAAGC,OAAO,CAAC,iBAAiB,CAAC,CACnCC,UAAU,CAAGD,OAAO,CAAC,sCAAsC,CAAC,CAC5DE,MAAM,CAAGD,UAAU,CAACE,YAAY,CAAC,CACtCC,KAAK,CAAE,cAAc,CACrBC,SAAS,CAAE,uBACZ,CAAC,CAAC,CAEFC,MAAM,CAACC,OAAO,CAAGL,MAAM,CAACM,UAAU,CAAC,CAClCC,YAAA,CAAgB,UAAU,CACvBC,aAAA,CAAe,SAAS,CAC3BC,KAAA,CAAS,mBACV,CAAC,CAAC,CAACC,IAAI,CAACV,MAAM,CAACW,MAAM,CAAC,CAACD,IAAI,CAAC,SAAUE,CAAO,CAAE,CAI9C;AAFAA,CAAO,CAACC,KAAK,CAAGD,CAAO,CAACC,KAAK,CAACC,MAAM,CAACC,CAAK,EAAgC,CAAC,CAA7BC,MAAM,CAACC,IAAI,CAACF,CAAK,CAAC,CAACG,MAAU,CAAC,CAe5E,GAAI,CAAAC,CAAc,CAAEC,CAAQ,CAeiB;AAC7C,MAdA,CAAAA,CAAQ,CAAGR,CAAO,CAACC,KAAK,CAACC,MAAM,CAACO,CAAI,EAAkB,SAAS,GAAvBA,CAAI,CAACC,IAAkB,CAAC,CAGhEH,CAAc,CAAGC,CAAQ,CAACN,MAAM,CAACS,CAAO,GACnCA,CAAO,CAACC,SAAS,EACb3B,MAAM,CAAC0B,CAAO,CAACC,SAAS,CAAC,CAACC,OAAO,CAAC,CAI1C,CAAC,CAGFN,CAAc,CAACO,IAAI,CA1BnB,SAAqBC,CAAQ,CAAE,CAC9B,GAAI,CAAAC,CAAS,CAAG,CAAC,CAKjB,MAJmB,GAAG,GAAnBD,CAAQ,CAAC,CAAC,CAAS,GACrBC,CAAS,CAAG,CAAC,CAAC,CACdD,CAAQ,CAAGA,CAAQ,CAACE,MAAM,CAAC,CAAC,CAAC,EAEvB,SAAUC,CAAC,CAACC,CAAC,CAAE,CACrB,GAAI,CAAAC,CAAM,CAAIF,CAAC,CAACH,CAAQ,CAAC,CAAGI,CAAC,CAACJ,CAAQ,CAAC,CAAI,CAAC,CAAC,CAAIG,CAAC,CAACH,CAAQ,CAAC,CAAGI,CAAC,CAACJ,CAAQ,CAAC,CAAI,CAAC,CAAG,CAAC,CACnF,MAAO,CAAAK,CAAM,CAAGJ,CACjB,CACD,CAAC,CAgB+B,WAAW,CAAC,CAAC,CAC7CT,CAAc,CAAGA,CAAc,CAACc,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CACpCd,CACR,CAAC,CAAC"}