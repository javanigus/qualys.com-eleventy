{"version":3,"file":"coveo.js","names":["document","addEventListener","fetch","then","response","ok","Error","json","responseData","searchbox","querySelector","search","Coveo","SearchEndpoint","configureCloudV2Endpoint","queryStringArguments","searchHub","hideShowMoreLink","init","externalComponents","searchPageURI","options","Omnibox","placeholder","location","pathname","match","initSearchbox","catch","error","console","event","result","detail","item","totalNumberOfChildResults","raw","jivereplycount","wpcommentcount","numberOfChildResultsShown","childResults","length","coveoFoldingFooter","classList","add"],"sources":["../../../site/pages/asset/coveo/coveo.js"],"sourcesContent":["/* global Coveo */\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    fetch(\"https://hyppimpgupvx2ofcrsn2yxsg2i0dcmgs.lambda-url.us-east-1.on.aws/\")\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch API key\");\n            }\n            return response.json();\n        })\n        .then(responseData => {\n            const PUBLIC_API_KEY = responseData;\n\n            const searchbox = document.querySelector(\"#searchbox\");\n            const search = document.querySelector(\"#search\");\n\n            Coveo.SearchEndpoint.configureCloudV2Endpoint(\n                \"\",\n                PUBLIC_API_KEY,\n                \"https://platform.cloud.coveo.com/rest/search\",\n                {\n                    queryStringArguments: {\n                        searchHub: \"CommunitySearch\",\n                    },\n                }\n            );\n\n            if (search) {\n                search.addEventListener(\"newResultDisplayed\", hideShowMoreLink);\n                Coveo.init(search, {\n                    externalComponents: [searchbox],\n                });\n            } else {\n                let searchPageURI = \"https://success.qualys.com/support/s/global-search/%40uri\";\n                let options = {\n                    Omnibox: {\n                        placeholder: \"Search\",\n                    },\n                };\n\n                if (location.pathname.match(/^\\/vulnerability-detection-pipeline/)) {\n                    searchPageURI = \"https://success.qualys.com/support/s/global-search/%40uri\";\n                    options.Omnibox.placeholder = \"Search Discussions, Blog Posts, Training, Docs and Support\";\n                }\n\n                if (location.pathname.match(/^\\/documentation/)) {\n                    searchPageURI = \"https://success.qualys.com/support/s/global-search/%40uri#t=Docs\";\n                    options.Omnibox.placeholder = \"Search documentation\";\n                }\n\n                if (location.pathname.match(/^\\/training/)) {\n                    searchPageURI = \"https://success.qualys.com/support/s/global-search/%40uri#t=Training\";\n                    options.Omnibox.placeholder = \"Search training\";\n                }\n\n                Coveo.initSearchbox(searchbox, searchPageURI, options);\n            }\n        })\n        .catch(error => {\n            console.error(error);\n            // Handle error\n        });\n});\n\nfunction hideShowMoreLink(event) {\n    const result = event.detail.result;\n    const item = event.detail.item;\n    const totalNumberOfChildResults = result.raw.jivereplycount || result.raw.wpcommentcount || 0;\n    const numberOfChildResultsShown = result.childResults.length;\n    const numberOfChildResultsRemaining = totalNumberOfChildResults - numberOfChildResultsShown;\n\n    if (numberOfChildResultsRemaining < 1) {\n        const coveoFoldingFooter = item.querySelector(\".coveo-folding-footer\");\n        if (coveoFoldingFooter) {\n            coveoFoldingFooter.classList.add(\"hidden\");\n        }\n    }\n}\n"],"mappings":"aAEAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,CAAE,UAAY,CACtDC,KAAK,CAAC,uEAAuE,CAAC,CACzEC,IAAI,CAACC,CAAQ,EAAI,CACd,GAAI,CAACA,CAAQ,CAACC,EAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,yBAAyB,CAAC,CAE9C,MAAO,CAAAF,CAAQ,CAACG,IAAI,CAAC,CACzB,CAAC,CAAC,CACDJ,IAAI,CAACK,CAAY,EAAI,MAGZ,CAAAC,CAAS,CAAGT,QAAQ,CAACU,aAAa,CAAC,YAAY,CAAC,CAChDC,CAAM,CAAGX,QAAQ,CAACU,aAAa,CAAC,SAAS,CAAC,CAahD,GAXAE,KAAK,CAACC,cAAc,CAACC,wBAAwB,CACzC,EAAE,CANiBN,CAAY,CAQ/B,8CAA8C,CAC9C,CACIO,oBAAoB,CAAE,CAClBC,SAAS,CAAE,iBACf,CACJ,CACJ,CAAC,CAEGL,CAAM,CACNA,CAAM,CAACV,gBAAgB,CAAC,oBAAoB,CAAEgB,gBAAgB,CAAC,CAC/DL,KAAK,CAACM,IAAI,CAACP,CAAM,CAAE,CACfQ,kBAAkB,CAAE,CAACV,CAAS,CAClC,CAAC,CAAC,KACC,IACC,CAAAW,CAAa,CAAG,2DAA2D,CAC3EC,CAAO,CAAG,CACVC,OAAO,CAAE,CACLC,WAAW,CAAE,QACjB,CACJ,CAAC,CAEGC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,qCAAqC,CAAC,GAC9DN,CAAa,CAAG,2DAA2D,CAC3EC,CAAO,CAACC,OAAO,CAACC,WAAW,CAAG,4DAA4D,EAG1FC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,kBAAkB,CAAC,GAC3CN,CAAa,CAAG,kEAAkE,CAClFC,CAAO,CAACC,OAAO,CAACC,WAAW,CAAG,sBAAsB,EAGpDC,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,aAAa,CAAC,GACtCN,CAAa,CAAG,sEAAsE,CACtFC,CAAO,CAACC,OAAO,CAACC,WAAW,CAAG,iBAAiB,EAGnDX,KAAK,CAACe,aAAa,CAAClB,CAAS,CAAEW,CAAa,CAAEC,CAAO,CACzD,CACJ,CAAC,CAAC,CACDO,KAAK,CAACC,CAAK,EAAI,CACZC,OAAO,CAACD,KAAK,CAACA,CAAK,CAEvB,CAAC,CACT,CAAC,CAAC,CAEF,QAAS,CAAAZ,gBAAgBA,CAACc,CAAK,CAAE,MACvB,CAAAC,CAAM,CAAGD,CAAK,CAACE,MAAM,CAACD,MAAM,CAC5BE,CAAI,CAAGH,CAAK,CAACE,MAAM,CAACC,IAAI,CACxBC,CAAyB,CAAGH,CAAM,CAACI,GAAG,CAACC,cAAc,EAAIL,CAAM,CAACI,GAAG,CAACE,cAAc,EAAI,CAAC,CACvFC,CAAyB,CAAGP,CAAM,CAACQ,YAAY,CAACC,MAAM,CAG5D,GAAoC,CAAC,CAFCN,CAAyB,CAAGI,CAE7B,CAAE,CACnC,KAAM,CAAAG,CAAkB,CAAGR,CAAI,CAACxB,aAAa,CAAC,uBAAuB,CAAC,CAClEgC,CAAkB,EAClBA,CAAkB,CAACC,SAAS,CAACC,GAAG,CAAC,QAAQ,CAEjD,CACJ"}