{"version":3,"file":"coveo.js","names":["document","addEventListener","PUBLIC_API_KEY","options","search","searchbox","searchPageURI","site","querySelector","JSON","parse","innerText","err","console","warn","coveo","public","api","key","Error","Coveo","SearchEndpoint","configureCloudV2Endpoint","queryStringArguments","searchHub","event","result","detail","item","totalNumberOfChildResults","raw","jivereplycount","wpcommentcount","numberOfChildResultsShown","childResults","length","coveoFoldingFooter","classList","add","init","externalComponents","Omnibox","placeholder","location","pathname","match","community","base","url","initSearchbox"],"sources":["../../../site/pages/asset/community/coveo.js"],"sourcesContent":["/* global Coveo */\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tvar PUBLIC_API_KEY, options, search, searchbox, searchPageURI, site;\n\n\tsite = document.querySelector(\"#site_data\");\n\ttry {\n\t\tsite = JSON.parse(site.innerText);\n\t} catch (err) {\n\t\t/* eslint-disable no-console */\n\t\tconsole.warn(err);\n\t\t/* eslint-enable no-console */\n\t\tsite = {};\n\t}\n\n\tif (site.coveo && site.coveo.public && site.coveo.public.api) {\n\t\tPUBLIC_API_KEY = site.coveo.public.api.key;\n\t} else {\n\t\tthrow new Error(\"Public API Key for Coveo not found.\");\n\t}\n\tsearchbox = document.querySelector(\"#searchbox\");\n\tsearch = document.querySelector(\"#search\");\n\n\tCoveo.SearchEndpoint.configureCloudV2Endpoint(\n\t\t\"\",\n\t\tPUBLIC_API_KEY,\n\t\t\"https://platform.cloud.coveo.com/rest/search\",\n\t\t{\n\t\t\t\"queryStringArguments\": {\n\t\t\t\t\"searchHub\": \"CommunitySearch\"\n\t\t\t}\n\t\t}\n\t);\n\n\tif (search) {\n\n\t\t// bind custom event callbacks before initialization\n\t\tsearch.addEventListener(\"newResultDisplayed\", hideShowMoreLink);\n\n\t\t// add an external component to the initialization options\n\t\t// to link the external search box to the search results\n\t\tCoveo.init(search, {\n\t\t\t\"externalComponents\": [searchbox]\n\t\t});\n\n\t} else {\n\n\t\tsearchPageURI = \"/search/\";\n\t\toptions = {\n\t\t\t\"Omnibox\": {\n\t\t\t\t\"placeholder\": \"Search\"\n\t\t\t}\n\t\t};\n\n\t\tif (location.pathname.match(/^\\/vulnerability-detection-pipeline/)) {\n\t\t\tsearchPageURI = site.community.base.url + \"/search/\";\n\t\t\toptions.Omnibox.placeholder = \"Search Discussions, Blog Posts, Training, Docs and Support\";\n\t\t}\n\n\t\tif (location.pathname.match(/^\\/documentation/)) {\n\n\t\t\t// searching from a Docs page\n\t\t\tsearchPageURI = site.community.base.url + \"/search/#t=Docs\";\n\t\t\toptions.Omnibox.placeholder = \"Search documentation\";\n\n\t\t}\n\n\t\tif (location.pathname.match(/^\\/training/)) {\n\n\t\t\t// searching from a Training page\n\t\t\tsearchPageURI = site.community.base.url + \"/search/#t=Training\";\n\t\t\toptions.Omnibox.placeholder = \"Search training\";\n\n\t\t}\n\n\t\t// call initSearchBox to setup the standalone search box\n\t\tCoveo.initSearchbox(searchbox, searchPageURI, options);\n\n\t}\n\n\n\t// helper function to hide \"Show more\" links when there are no more results to show\n\tfunction hideShowMoreLink (event) {\n\n\t\tvar result = event.detail.result;\n\t\tvar item = event.detail.item;\n\t\tvar totalNumberOfChildResults = result.raw.jivereplycount || result.raw.wpcommentcount || 0;\n\t\tvar numberOfChildResultsShown = result.childResults.length;\n\t\tvar numberOfChildResultsRemaining = totalNumberOfChildResults - numberOfChildResultsShown;\n\n\t\tif (numberOfChildResultsRemaining < 1) {\n\n\t\t\t// hide Show more link\n\t\t\tvar coveoFoldingFooter = item.querySelector(\".coveo-folding-footer\");\n\t\t\tif (coveoFoldingFooter) {\n\t\t\t\tcoveoFoldingFooter.classList.add(\"hidden\");\n\t\t\t}\n\n\t\t}\n\n\t}\n\n});\n"],"mappings":"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"}