{"version":3,"file":"dilo-story.js","names":["smoothScroll","targetId","targetElement","document","getElementById","offsetTop","window","scrollTo","top","behavior","attachClickEvents","pagingElements","forEach","element","addEventListener","event","preventDefault","smoothScrollToTarget","call","targetID","getAttribute","scrollIntoView","block","removeActiveClass","pagingEl","querySelectorAll","link","classList","remove","videoScrollHandler","video","playSeconds","stopSeconds","index","videoNumber","querySelector","videoPlayer","innerHTML","storyId","id","correspondingLink","concat","add","currentTime","play","muted","onTimeUpdate","Math","floor","removeEventListener","pause","diloStoryDesktop","storyWrappers","mainContent","headerDiv","waypoints","startTime","stopTime","parts","split","hours","parseInt","minutes","seconds","parts2","hours2","minutes2","seconds2","handlerFunction","waypointVidoes","Waypoint","handler","offset","waypointVidoesUp","push","backButton","footerUp","direction","headerUp","handleResize","viewportWidth","innerWidth","documentElement","clientWidth","pauseAndResetVideos","controlVideoPlayback","content","closest","playVideoForVisibleContent","videoContents","videoPlayers","handleMobileResize","replayStoryBtn","heroHeading","anime","targets","opacity","delay","translateY","stagger","easing","start","duration","_","debounce","dayLifeSwiper","dayLifeSliderContainer","dayLifeSliderNav","initDayLifeSwiper","Swiper","slidesPerView","spaceBetween","centeredSlides","autoplay","autoHeight","loop","navigation","nextEl","prevEl","pagination","el","clickable","breakpoints","on","init","outerHeight","offsetHeight","hoverElements","hoverElement","style","height","handleDayLifeSwiper","storyBoxes","length","storyBox","screenshot","hover","handleHashChange","queryParams","URLSearchParams","location","search","has","storyValue","get","tourAnchor","click"],"sources":["../../../site/pages/asset/script/dilo-story.js"],"sourcesContent":["/* global _ Waypoint Swiper anime  */\n\n(function () {\n\t\"use strict\";\n\n\t// function to navigate to a section in the page with smooth scroll\n\tfunction smoothScroll(targetId) {\n\n\t\tconst targetElement = document.getElementById(targetId);\n\n\t\tif (targetElement) {\n\t\t\tconst offsetTop = targetElement.offsetTop + 100;\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: offsetTop,\n\t\t\t\tbehavior: \"smooth\"\n\t\t\t});\n\t\t}\n\t}\n\n\t// replay the story\n\tconst replayStoryBtn = document.querySelector(\".js-replay-button\");\n\tif( replayStoryBtn ){\n\t\treplayStoryBtn.addEventListener(\"click\", () => smoothScroll(\"desktop_top\"));\n\t}\n\n\t// function to attach to the desktop paging for scrollong between the stories\n\tfunction attachClickEvents(pagingElements) {\n\t\tpagingElements.forEach(element => {\n\t\t\telement.addEventListener(\"click\", function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsmoothScrollToTarget.call(this, event);\n\t\t\t});\n\t\t});\n\t}\n\n\t// function to smoothly scroll between the stories on desktop paging\n\tfunction smoothScrollToTarget() {\n\t\tconst targetID = this.getAttribute(\"data-story\");\n\t\tconst targetElement = document.getElementById(targetID);\n\n\t\tif (targetElement) {\n\t\t\ttargetElement.scrollIntoView({\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t\tblock: \"start\"\n\t\t\t});\n\t\t}\n\t}\n\n\t// function to remove the active style on desktop paging\n\tfunction removeActiveClass() {\n\t\tconst pagingEl = document.querySelectorAll(\".js-paging\");\n        pagingEl.forEach(function(link) {\n            link.classList.remove(\"active\");\n        });\n    }\n\n\t/**\n\t * hero heading animation\n\t */\n\n\tconst heroHeading = document.querySelector(\".js-replay-button\");\n\n\tif (heroHeading) {\n\t\tanime({\n\t\t\ttargets: \".js-dilo-hero-heading\",\n\t\t\topacity: [0, 1],\n\t\t\tdelay: 1000 // increase delay by 100ms for each elements.\n\t\t});\n\n\t\tanime({\n\t\t\ttargets: \".js-dilo-hero-heading span\",\n\t\t\ttranslateY: [30, 0],\n\t\t\tdelay: anime.stagger(50, {easing: \"easeOutSine\", start: 1000}) // increase delay by 100ms for each elements.\n\t\t});\n\n\t\tanime({\n\t\t\ttargets: \".js-dilo-person\",\n\t\t\ttranslateY: [-30, 0],\n\t\t\topacity: [0, 1],\n\t\t\tdelay: anime.stagger(100, {easing: \"easeOutSine\", start: 1300, direction: \"reverse\"})\n\t\t});\n\n\t\tanime({\n\t\t\ttargets: \".js-dilo-hero-btn\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [-60, 0],\n\t\t\tduration: 100,\n\t\t\tdelay: 1600 // increase delay by 100ms for each elements.\n\t\t});\n\n\t\tanime({\n\t\t\ttargets: \".js-dilo-quote\",\n\t\t\ttranslateY: [-30, 0],\n\t\t\topacity: [0, 1],\n\t\t\tdelay: anime.stagger(100, {easing: \"easeOutSine\", start: 1300, direction: \"reverse\"})\n\t\t});\n\t}\n\n\n\t/**\n\t *\n\t * Story video and scroll controller funtion for desktop\n\t */\n\tfunction videoScrollHandler(video, playSeconds, stopSeconds, index) {\n\t\tvar videoNumber = document.querySelector(\"#videoCount\");\n\t\tvar videoPlayer = document.querySelector(\".js-videoPlayer\");\n\n\t\t// This function will be called by the Waypoint handlers\n\t\treturn function() {\n\t\t\t// Update the video number\n\t\t\tvideoNumber.innerHTML = index + 1;\n\t\t\t// Remove active class from all other links (this should be defined elsewhere)\n\t\t\tremoveActiveClass();\n\t\t\t// Find and activate the corresponding link\n\t\t\tvar storyId = video.id; // e.g., \"story_1\"\n\t\t\tvar correspondingLink = document.querySelector(`.js-paging[data-story=\"${storyId}\"]`);\n\t\t\tif (correspondingLink) {\n\t\t\t\tcorrespondingLink.classList.add(\"active\");\n\t\t\t}\n\t\t\t// Control the video player\n\t\t\tvideoPlayer.currentTime = playSeconds;\n\t\t\tvideoPlayer.play();\n\t\t\tvideoPlayer.muted = false;\n\n\t\t\t// Set up a function to monitor time updates and stop the video at the designated time\n\t\t\tvar onTimeUpdate = function() {\n\t\t\t\tif(Math.floor(videoPlayer.currentTime) >= stopSeconds) {\n\t\t\t\t\tvideoPlayer.removeEventListener(\"timeupdate\", onTimeUpdate);\n\t\t\t\t\tvideoPlayer.pause();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvideoPlayer.play();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add the event listener to handle time updates\n\t\t\tvideoPlayer.addEventListener(\"timeupdate\", onTimeUpdate);\n\t\t};\n\t}\n\n\n\tfunction diloStoryDesktop() {\n\n\t\t// var stories = document.querySelectorAll(\".storyWrapper > .story\");\n\t\tvar storyWrappers = document.querySelectorAll(\".storyWrapper\");\n\t\tvar videoPlayer = document.querySelector(\".js-videoPlayer\");\n\t\tvar mainContent = document.querySelector(\".j-main-container\");\n\t\tvar headerDiv = document.querySelector(\".headerDiv\");\n\t\tvar waypoints = [];\n\n\t\tif(!videoPlayer) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvideoPlayer.muted = true;\n\n\t\tstoryWrappers.forEach(function(video, index) {\n\n\n\t\t\tvar startTime = video.getAttribute(\"data-start\");\n\t\t\tvar stopTime = video.getAttribute(\"data-stop\");\n\n\t\t\tvar parts = startTime.split(\":\");\n\n\t\t\tvar hours = parseInt(parts[0], 10);\n\t\t\tvar minutes = parseInt(parts[1], 10);\n\t\t\tvar seconds = parseInt(parts[2], 10);\n\n\t\t\tvar playSeconds = hours * 3600 + minutes * 60 + seconds;\n\n\t\t\tvar parts2 = stopTime.split(\":\");\n\t\t\tvar hours2 = parseInt(parts2[0], 10);\n\t\t\tvar minutes2 = parseInt(parts2[1], 10);\n\t\t\tvar seconds2 = parseInt(parts2[2], 10);\n\n\t\t\tvar stopSeconds = hours2 * 3600 + minutes2 * 60 + seconds2;\n\n\t\t\tvar handlerFunction = videoScrollHandler(video, playSeconds, stopSeconds, index);\n\n\t\t\tvar waypointVidoes = new Waypoint({\n\t\t\t\telement: video,\n\t\t\t\thandler: handlerFunction,\n\t\t\t\toffset: \"30%\"\n\t\t\t});\n\n\t\t\tvar waypointVidoesUp = new Waypoint({\n\t\t\t\telement: video,\n\t\t\t\thandler: handlerFunction,\n\t\t\t\toffset: \"-70%\"\n\t\t\t});\n\n\t\t\twaypoints.push(waypointVidoes, waypointVidoesUp);\n\n\t\t});\n\n\t\t// Waypoint to stop video when headerDiv is 50% on viewport\n\n\t\tconst backButton = document.querySelector(\".js-back-button\");\n\n\t\tvar footerUp = new Waypoint({\n\t\t\telement: mainContent,\n\t\t\thandler: function(direction) {\n\t\t\t\tif (direction === \"down\") {\n\t\t\t\t\tbackButton.classList.add(\"hidden\");\n\t\t\t\t} else {\n\t\t\t\t\tbackButton.classList.remove(\"hidden\");\n\t\t\t\t}\n\t\t\t},\n\t\t\toffset: \"bottom-in-view\"\n\t\t});\n\n\t\tvar headerUp = new Waypoint({\n\t\t\telement: headerDiv,\n\t\t\thandler: function(direction) {\n\t\t\t\tif (direction === \"down\") {\n\t\t\t\t\tbackButton.classList.remove(\"hidden\");\n\t\t\t\t} else {\n\t\t\t\t\tbackButton.classList.add(\"hidden\");\n\t\t\t\t}\n\t\t\t},\n\t\t\toffset: \"-90%\"\n\t\t});\n\n\t\twaypoints.push(footerUp, headerUp);\n\t}\n\n\tfunction handleResize() {\n\t\tvar viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n\t\tif (viewportWidth >= 768) {\n\t\t\tdiloStoryDesktop();\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"DOMContentLoaded\", function() {\n\n\t\thandleResize();\n\n\n\t\twindow.addEventListener(\"resize\", _.debounce(function() {\n\t\t\thandleResize();\n\t\t}, 250)); // Adjust debounce delay as needed\n\n\t});\n\n\t/**\n\t * mobile video playback\n\t */\n\n\tfunction pauseAndResetVideos() {\n\t\tdocument.querySelectorAll(\".js-mvideo\").forEach((video) => {\n\t\t\tvideo.pause();\n\t\t\tvideo.currentTime = 0;\n\t\t});\n\t}\n\n\tfunction controlVideoPlayback(content) {\n\t\t// Pause and reset all videos\n\t\tpauseAndResetVideos();\n\n\t\t// Find the video player within the same `.js-mstory` parent and play it\n\t\tconst videoPlayer = content.closest(\".js-mstory\").querySelector(\".js-mvideo\");\n\t\tif (videoPlayer) {\n\t\t\tvideoPlayer.play();\n\t\t\tvideoPlayer.muted = false;\n\t\t}\n\t}\n\n\tfunction playVideoForVisibleContent() {\n\t\tconst videoContents = document.querySelectorAll(\".js-mvideo-content\");\n\t\tvar videoPlayers = document.querySelectorAll(\".js-mvideo\");\n\n\t\t// Loop through each video element and mute it\n\t\tvideoPlayers.forEach(function(video) {\n\t\t\tvideo.muted = true; // Set the muted property to true\n\t\t});\n\n\t\tvideoContents.forEach((content) => {\n\t\t\t// Waypoint for scrolling down\n\t\t\tnew Waypoint({\n\t\t\t\telement: content,\n\t\t\t\thandler: function(direction) {\n\t\t\t\t\tif (direction === 'down') {\n\t\t\t\t\t\tcontrolVideoPlayback(content);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\toffset: '75%' // Trigger when the element is 75% into the viewport from the top\n\t\t\t});\n\n\t\t\t// Waypoint for scrolling up\n\t\t\tnew Waypoint({\n\t\t\t\telement: content,\n\t\t\t\thandler: function(direction) {\n\t\t\t\t\tif (direction === 'up') {\n\t\t\t\t\t\tcontrolVideoPlayback(content);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\toffset: '-40%' // Trigger when the element has passed 40% of the viewport from the bottom\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction handleMobileResize() {\n\t\tvar viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n\n\t\tif (viewportWidth < 768) {\n\t\t\tplayVideoForVisibleContent();\n\t\t} else {\n\t\t\tpauseAndResetVideos();\n\t\t}\n\t}\n\n\tdocument.addEventListener(\"DOMContentLoaded\", function() {\n\t\thandleMobileResize();\n\n\t\t// Assuming you have a debounce function available, such as through Lodash (_.debounce)\n\t\twindow.addEventListener(\"resize\", _.debounce(function() {\n\t\t\thandleMobileResize();\n\t\t}, 250)); // Adjust debounce delay as needed\n\t});\n\n\n\n\t/*\n\t* product tour scripts\n\t*/\n\n\t// product tour carousel\n\n\tlet dayLifeSwiper = null;\n\tconst dayLifeSliderContainer = document.querySelector(\".js-daylife-slider\");\n\tconst dayLifeSliderNav = document.querySelector(\".js-dilo-slider-nav\");\n\n\tconst initDayLifeSwiper = () => {\n\t\tdayLifeSwiper = new Swiper(\".js-daylife-slider\", {\n\t\t\tslidesPerView: 3,\n\t\t\tspaceBetween: 20,\n\t\t\tcenteredSlides: false,\n\t\t\tautoplay: false,\n\t\t\tautoHeight: false,\n\t\t\tloop: false,\n\t\t\tnavigation: {\n\t\t\t\tnextEl: \".js-next-dayslide\",\n\t\t\t\tprevEl: \".js-prev-dayslide\"\n\t\t\t},\n\t\t\tpagination: {\n\t\t\t\tel: \".js-daylife-paging\",\n\t\t\t\tclickable: true\n\t\t\t},\n\t\t\tbreakpoints: {\n\t\t\t\t320: {\n\t\t\t\t\tslidesPerView: 1\n\t\t\t\t},\n\t\t\t\t640: {\n\t\t\t\t\tslidesPerView: 2\n\t\t\t\t},\n\t\t\t\t940: {\n\t\t\t\t\tslidesPerView: 3\n\t\t\t\t}\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tinit: function(){\n\t\t\t\t\tvar outerHeight = dayLifeSliderContainer.offsetHeight;\n\t\t\t\t\tvar hoverElements = document.querySelectorAll(\".js-pt-hover\");\n\t\t\t\t\thoverElements.forEach( hoverElement => {\n\t\t\t\t\t\thoverElement.style.height = outerHeight - 100 + \"px\";\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleDayLifeSwiper = () => {\n\t\tif (!dayLifeSwiper && dayLifeSliderContainer) {\n\t\t\tdayLifeSliderContainer.classList.remove(\"opacity-0\");\n\t\t\tdayLifeSliderNav.classList.remove(\"opacity-0\");\n\t\t\tinitDayLifeSwiper();\n\t\t}\n\t};\n\tif( dayLifeSliderContainer ){\n\n\t\twindow.addEventListener(\"load\", handleDayLifeSwiper);\n\t\twindow.addEventListener(\"resize\", handleDayLifeSwiper);\n\n\t}\n\n\t// hover text change\n\t// Select all elements with the class 'js-pt-storyBox'\n\tconst storyBoxes = document.querySelectorAll(\".js-pt-storyBox\");\n\n\t// Check if there are any '.js-pt-storyBox' elements on the page\n\tif (storyBoxes.length > 0) {\n\t\tstoryBoxes.forEach(storyBox => {\n\n\t\t\tstoryBox.addEventListener(\"mouseover\", () => {\n\t\t\t\tconst screenshot = storyBox.querySelector(\".js-pt-screenshot\");\n\t\t\t\tconst content = storyBox.querySelector(\".js-pt-content\");\n\t\t\t\tconst hover = storyBox.querySelector(\".js-pt-hover\");\n\n\t\t\t\t// Add 'hidden' class to 'js-pt-screenshot' and 'js-pt-content'\n\t\t\t\tif (screenshot) screenshot.classList.add(\"opacity-0\");\n\t\t\t\tif (content) content.classList.add(\"opacity-0\");\n\n\t\t\t\t// Remove 'hidden' class from 'js-pt-hover'\n\t\t\t\tif (hover) hover.classList.remove(\"opacity-0\");\n\t\t\t});\n\n\t\t\t// Mouseout event\n\t\t\tstoryBox.addEventListener(\"mouseout\", () => {\n\t\t\t\tconst screenshot = storyBox.querySelector(\".js-pt-screenshot\");\n\t\t\t\tconst content = storyBox.querySelector(\".js-pt-content\");\n\t\t\t\tconst hover = storyBox.querySelector(\".js-pt-hover\");\n\n\t\t\t\t// Remove 'hidden' class from 'js-pt-screenshot' and 'js-pt-content'\n\t\t\t\tif (screenshot) screenshot.classList.remove(\"opacity-0\");\n\t\t\t\tif (content) content.classList.remove(\"opacity-0\");\n\n\t\t\t\t// Add 'hidden' class back to 'js-pt-hover'\n\t\t\t\tif (hover) hover.classList.add(\"opacity-0\");\n\t\t\t});\n\t\t});\n\t}\n\n\t// dilo story pagination\n\tdocument.addEventListener(\"DOMContentLoaded\", function() {\n\t\tconst pagingElements = document.querySelectorAll(\".js-paging\");\n\n\t\tif (pagingElements.length > 0) {\n\t\t\tattachClickEvents(pagingElements);\n\t\t}\n\n\t\tfunction handleHashChange() {\n\t\t\tconst queryParams = new URLSearchParams(location.search);\n\t\t\tif (queryParams.has('story')) {\n\t\t\t\tconst storyValue = queryParams.get('story');\n\t\t\t\tconst tourAnchor = document.querySelector('.js-ptour-anchor[data-story=\"' + storyValue + '\"]');\n\t\t\t\tif (tourAnchor) {\n\t\t\t\t\ttourAnchor.click();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thandleHashChange();\n\n\t\twindow.addEventListener('hashchange', handleHashChange);\n\t});\n\n})();\n"],"mappings":"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"}