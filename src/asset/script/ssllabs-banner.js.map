{"version":3,"file":"ssllabs-banner.js","names":["closeBanner","promoBanners","slice","call","document","querySelectorAll","forEach","promo","index","classList","add","oneDayFromNow","Date","getTime","cookie","toUTCString","join","match","promos","seconds","Math","round","now","filter","expires","getAttribute","expirationDate","length","noBanner","folders","pathname","window","location","folderIndex","indexOf","remove","body","querySelector","insertBefore","firstChild","promoBannerCloseButtons","button","addEventListener"],"sources":["../../../site/pages/asset/script/ssllabs-banner.js"],"sourcesContent":["/*\n * show and hide thin strip promo banner\n */\n(function () {\n\n\t\"use strict\";\n\n\t// when user clicks the X, close the promo banner and hide it for one day\n\tfunction closeBanner () {\n\n\t\t// get all promo banners\n\t\tvar promoBanners = [].slice.call(document.querySelectorAll(\".js-promo-banner\"));\n\n\t\tif (promoBanners) {\n\t\t\tpromoBanners.forEach(function (promo, index) {\n\t\t\t\t// hide each banner\n\t\t\t\tpromoBanners[index].classList.add(\"promo--hidden\");\n\t\t\t});\n\t\t}\n\n\t\t// set a cookie to expire in 1 day (24 hours)\n\t\tvar oneDayFromNow = new Date((new Date()).getTime() + (24 * 60 * 60 * 1000));\n\t\tdocument.cookie = [\n\t\t\t\"qualys.promo.banner.notice=false\",\n\t\t\t\"path=/\",\n\t\t\t\"expires=\" + oneDayFromNow.toUTCString(),\n\t\t\t\"secure=yes\"\n\t\t].join(\"; \");\n\n\t}\n\n\t// if the promo banner cookie doesn't exist, show one promo banner at a time\n\tif (!document.cookie.match(/qualys\\.promo\\.banner\\.notice/)) {\n\n\t\t// get array of promo banners\n\t\tvar promos = [].slice.call(document.querySelectorAll(\".js-promo-banner\"));\n\n\t\t// get client's current time in seconds\n\t\tvar seconds = Math.round((Date.now() || (new Date()).getTime()) / 1000);\n\n\t\t// filter out expired promos\n\t\tpromos = promos.filter(function (promo) {\n\n\t\t\tvar expires = promo.getAttribute(\"data-expires\");\n\t\t\tif (expires) {\n\t\t\t\tvar expirationDate = new Date(expires);\n\t\t\t\tif (expirationDate && expirationDate > new Date()) {\n\t\t\t\t\treturn promo;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\t// randomly get index of one promo banner to show\n\t\tvar index = seconds % promos.length, folder, noBanner = false;\n\n\t\t// do not show banner for pages under certain folders\n\t\tvar folders = [\"whitepapers\", \"forms\", \"free-trial\", \"lp\"];\n\t\tvar pathname = window.location.pathname;\n\n\t\tfor (folderIndex in folders) {\n\t\t\tif( pathname.indexOf(folders[folderIndex]) >= 0 ){\n\t\t\t\tnoBanner = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// show one promo banner\n\t\tif (index >= 0 && !noBanner) {\n\t\t\tpromos[index].classList.remove(\"promo--hidden\");\n\t\t\tvar body = document.querySelector(\"body\");\n\t\t\tbody.insertBefore(promos[index], body.firstChild);\n\t\t}\n\t}\n\n\t// when user clicks to close the promo banner close button, call the closeBanner function\n\tvar promoBannerCloseButtons = [].slice.call(document.querySelectorAll(\".q-alert__close\"));\n\n\tif (promoBannerCloseButtons) {\n\t\tpromoBannerCloseButtons.forEach(function (button) {\n\t\t\tbutton.addEventListener(\"click\", closeBanner);\n\t\t});\n\t}\n\n}());"],"mappings":"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"}