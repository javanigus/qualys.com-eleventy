{"version":3,"file":"index.js","names":["$","getUTF8Length","s","len","code","i","length","charCodeAt","validateEmail","val","emailLocalPart","emailDomainPart","trim","split","match","errors","push","errorMessages","en","invalidEmail","emailTooLong","emailInvalidDomain","workEmailRequired","on","event","empty","forEach","error","append","preventDefault","jQuery"],"sources":["../../../../site/pages/2020/vmdr-live/access/index.js"],"sourcesContent":["/* global jQuery */\n/*\n * Wrap Marketo form fields to support two column layout\n */\n(function ($) {\n\n    \"use strict\";\n\n    // function to count # of bytes in a string\n    // http://stackoverflow.com/questions/2848462/count-bytes-in-textarea-using-javascript/12206089#12206089\n    function getUTF8Length(s) {\n        var len, code, i;\n        len = 0;\n\n        if (s !== undefined) {\n            for (i = 0; i < s.length; i += 1) {\n                code = s.charCodeAt(i);\n                if (code <= 0x7f) {\n                    len += 1;\n                } else if (code <= 0x7ff) {\n                    len += 2;\n                } else if (code >= 0xd800 && code <= 0xdfff) {\n                    // Surrogate pair: These take 4 bytes in UTF-8 and 2 chars in UCS-2\n                    // (Assume next char is the other [valid] half and just skip it)\n                    len += 4;\n                    i += 1;\n                } else if (code < 0xffff) {\n                    len += 3;\n                } else {\n                    len += 4;\n                }\n            }\n        }\n\n        return len;\n    }\n\n    var errorMessages = {\n        \"en\": {\n            \"invalidEmail\": \"Enter the email address you used to register.\",\n            \"emailTooLong\": \"Enter the email address you used to register.\",\n            \"emailInvalidDomain\": \"Enter the email address you used to register.\",\n            \"workEmailRequired\": \"Enter the email address you used to register.\"\n        }\n    };\n\n    var errors;\n\n    function validateEmail() {\n        var val, emailLocalPart, emailDomainPart;\n        val = $(\"#Email\").val().trim();\n        // console.log(val);\n    \n        if (val !== undefined) {\n            emailLocalPart = val.split(\"@\")[0];\n            emailDomainPart = val.split(\"@\")[1];\n\n            // validate email field\n            if (val.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}/gi) === null) {\n                // email format must be valid\n                errors.push(errorMessages.en.invalidEmail);\n            }\n            if (getUTF8Length(val) > 100) {\n                //email address length may not exceed 100 characters\n                errors.push(errorMessages.en.emailTooLong);\n            }\n            if (getUTF8Length(emailDomainPart) > 253) {\n                // RFC 5321 Section 4.5.3.1.2\n                // email domain length must not exceed 253 characters\n                errors.push(errorMessages.en.emailTooLong);\n            }\n            if (getUTF8Length(emailLocalPart) > 64) {\n                // RFC 5321 Section 4.5.3.1.1\n                // email local part length must not exceed 64 characters\n                errors.push(errorMessages.en.emailTooLong);\n            }\n\n            if (emailDomainPart !== undefined) {\n                if (emailDomainPart.match(/^[A-Za-z0-9\\-.]+$/) === null) {\n                    // invalid characters in email domain name\n                    errors.push(errorMessages.en.emailInvalidDomain);\n                }\n                if (emailDomainPart.match(/\\.{2}/) !== null) {\n                    // email domain part may not have two consecutive dots\n                    errors.push(errorMessages.en.emailInvalidDomain);\n                }\n            }\n        }\n    }\n\n    $(\"form\").on(\"submit\", function (event) {\n        $(\".mktoErrorMsg\").empty();\n        errors = [];\n        validateEmail();\n        if (errors.length > 0) {\n            // console.log(errors);\n            errors.forEach(function (error) {\n                $(\".mktoErrorMsg\").append(\"<span>\" + error + \"</span>\");\n            });\n            event.preventDefault();\n        }\n    });\n}(jQuery));\n\n\n\n"],"mappings":"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"}