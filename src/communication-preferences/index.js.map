{"version":3,"file":"index.js","names":["MktoForms2","whenRendered","form","$form","getFormElem","find","change","not","each","index","element","$","parent","removeClass","matches","window","location","search","match","indexOf","val","prop"],"sources":["../../site/pages/communication-preferences/index.js"],"sourcesContent":["/* global MktoForms2 $ */\n\n/* Marketo Form section */\n/* TODO auto-fill */\n\nMktoForms2.whenRendered(function (form) {\n\n\tvar $form = form.getFormElem();\n\n\t/*\n\t * if click \"unsubscribe\" checkbox, uncheck all other checkboxes\n\t */\n\t$form.find(\"input[name=Unsubscribed]\").change(function () {\n\t\t// uncheck other checkboxes\n\t\t$form.find(\"[type=checkbox]\").not(\"input[name=Unsubscribed]\").each(function (index, element) {\n\t\t\t$(element).parent(\"label\").removeClass(\"checked\");\n\t\t});\n\t});\n\n\t/*\n\t * if click any checkbox other than \"unsubscribe\", uncheck \"subscribe\" checkbox\n\t */\n\t$form.find(\"input\").not(\"input[name=Unsubscribed]\").change(function () {\n\t\t$form.find(\"input[name=Unsubscribed]\").parent(\"label\").removeClass(\"checked\");\n\t});\n\n\t// get email address from URL parameters, prefill email field and check unsubscribe checkbox\n\tvar matches = window.location.search.match(/email=([^&]*)/);\n\tif (matches !== null && matches[1].indexOf(\"lead.Email\") === -1) {\n\t\t$form.find(\"input[name=Email]\").val(matches[1]);\n\t\t$form.find(\"input[name=Unsubscribed]\").prop(\"checked\", true);\n\t}\n\n});\n"],"mappings":"aAAA,0BAEA,2BACA,oBAEAA,UAAU,CAACC,YAAY,CAAC,SAAUC,CAAI,CAAE,CAEvC,GAAI,CAAAC,CAAK,CAAGD,CAAI,CAACE,WAAW,CAAC,CAAC,CAE9B;AACD;AACA,IACCD,CAAK,CAACE,IAAI,CAAC,0BAA0B,CAAC,CAACC,MAAM,CAAC,UAAY,CACzD;AACAH,CAAK,CAACE,IAAI,CAAC,iBAAiB,CAAC,CAACE,GAAG,CAAC,0BAA0B,CAAC,CAACC,IAAI,CAAC,SAAUC,CAAK,CAAEC,CAAO,CAAE,CAC5FC,CAAC,CAACD,CAAO,CAAC,CAACE,MAAM,CAAC,OAAO,CAAC,CAACC,WAAW,CAAC,SAAS,CACjD,CAAC,CACF,CAAC,CAAC,CAKFV,CAAK,CAACE,IAAI,CAAC,OAAO,CAAC,CAACE,GAAG,CAAC,0BAA0B,CAAC,CAACD,MAAM,CAAC,UAAY,CACtEH,CAAK,CAACE,IAAI,CAAC,0BAA0B,CAAC,CAACO,MAAM,CAAC,OAAO,CAAC,CAACC,WAAW,CAAC,SAAS,CAC7E,CAAC,CAAC,CAEF;AACA,GAAI,CAAAC,CAAO,CAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,eAAe,CAAC,CAC3C,IAAI,GAAhBJ,CAAgB,EAAyC,CAAC,CAAC,GAAvCA,CAAO,CAAC,CAAC,CAAC,CAACK,OAAO,CAAC,YAAY,CAAQ,GAC9DhB,CAAK,CAACE,IAAI,CAAC,mBAAmB,CAAC,CAACe,GAAG,CAACN,CAAO,CAAC,CAAC,CAAC,CAAC,CAC/CX,CAAK,CAACE,IAAI,CAAC,0BAA0B,CAAC,CAACgB,IAAI,CAAC,SAAS,GAAM,CAAC,CAG9D,CAAC,CAAC"}